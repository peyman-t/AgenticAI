{
  "name": "Demo: RAG",
  "nodes": [
    {
      "parameters": {
        "chunkOverlap": 50,
        "options": {
          "splitCode": "markdown"
        }
      },
      "id": "7d897223-4761-4b97-a2db-f309ac390fa1",
      "name": "Recursive Character Text Splitter",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "position": [
        32,
        544
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "### Load data into database\nFetch file from Google Drive, split it into chunks and insert into Pinecone index",
        "height": 806.6556079800943,
        "width": 978.0454109366399,
        "color": 7
      },
      "id": "abb7fb35-3f5f-4501-b478-3e533ecde1f1",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -640,
        96
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "### Chat with database\nEmbed the incoming chat message and use it retrieve relevant chunks from the vector store. These are passed to the model to formulate an answer ",
        "height": 849.4411596574598,
        "width": 795.4336844920119,
        "color": 7
      },
      "id": "490370e2-5ac2-4771-982d-7cee08c9b73c",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        608,
        64
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {}
      },
      "id": "a382b006-8f4b-4d05-89b8-41e156bbca8d",
      "name": "Default Data Loader",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "position": [
        32,
        432
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "12bca189-beb6-4aa1-b425-1b566f961a58",
      "name": "Question and Answer Chain",
      "type": "@n8n/n8n-nodes-langchain.chainRetrievalQa",
      "position": [
        672,
        208
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {},
      "id": "06fb461b-feff-4b4b-9a37-ab291453ff7a",
      "name": "Vector Store Retriever",
      "type": "@n8n/n8n-nodes-langchain.retrieverVectorStore",
      "position": [
        848,
        432
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "96ea342a-254c-45a1-b3d9-7845ab7d941f",
      "name": "When clicking 'Chat' button below",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "position": [
        480,
        208
      ],
      "webhookId": "066b342b-f2b6-401e-b560-12f5d23b6103",
      "typeVersion": 1
    },
    {
      "parameters": {},
      "id": "4f193c12-90b0-465d-916c-9c2380b4dfdb",
      "name": "In-Memory Vector Store1",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "position": [
        848,
        608
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "mode": "insert",
        "clearStore": true
      },
      "id": "815b1efd-3b47-442f-b490-55c602a4bb5f",
      "name": "In-Memory Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "position": [
        -272,
        256
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "modelName": "embed-multilingual-v3.0"
      },
      "id": "ff11a41c-33bd-46f3-94da-6897f9cbbc60",
      "name": "Embeddings Cohere",
      "type": "@n8n/n8n-nodes-langchain.embeddingsCohere",
      "position": [
        -336,
        528
      ],
      "typeVersion": 1,
      "credentials": {
        "cohereApi": {
          "id": "hxMBSWDv022aOF3g",
          "name": "CohereApi account"
        }
      }
    },
    {
      "parameters": {
        "model": "llama-3.3-70b-versatile",
        "options": {}
      },
      "id": "cfcc0a62-b6e2-48b5-bd44-89f3a12f8548",
      "name": "Groq Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "position": [
        720,
        448
      ],
      "typeVersion": 1,
      "credentials": {
        "groqApi": {
          "id": "9FfZtV8pFbhPx4mJ",
          "name": "Groq account 2"
        }
      },
      "notes": "使用繁體中文"
    },
    {
      "parameters": {
        "modelName": "embed-multilingual-v3.0"
      },
      "id": "ef162a2b-ca80-4472-8510-a96a098b1c06",
      "name": "Embeddings Cohere1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsCohere",
      "position": [
        960,
        784
      ],
      "typeVersion": 1,
      "credentials": {
        "cohereApi": {
          "id": "hxMBSWDv022aOF3g",
          "name": "CohereApi account"
        }
      }
    },
    {
      "parameters": {
        "formTitle": "Upload RAG txt",
        "formDescription": "Upload RAG txt",
        "formFields": {
          "values": [
            {
              "fieldLabel": "File",
              "fieldType": "file",
              "multipleFiles": false,
              "acceptFileTypes": ".txt",
              "requiredField": true
            }
          ]
        },
        "options": {}
      },
      "id": "7504c387-1e3d-4412-ab0e-9b198598c6c5",
      "name": "On form submission",
      "type": "n8n-nodes-base.formTrigger",
      "position": [
        -592,
        208
      ],
      "webhookId": "cab3dda4-3b49-4f05-a2c1-915ae4c62017",
      "typeVersion": 2.2
    }
  ],
  "pinData": {},
  "connections": {
    "Groq Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Question and Answer Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Cohere": {
      "ai_embedding": [
        [
          {
            "node": "In-Memory Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Cohere1": {
      "ai_embedding": [
        [
          {
            "node": "In-Memory Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "In-Memory Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Vector Store Retriever": {
      "ai_retriever": [
        [
          {
            "node": "Question and Answer Chain",
            "type": "ai_retriever",
            "index": 0
          }
        ]
      ]
    },
    "In-Memory Vector Store1": {
      "ai_vectorStore": [
        [
          {
            "node": "Vector Store Retriever",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "When clicking 'Chat' button below": {
      "main": [
        [
          {
            "node": "Question and Answer Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "On form submission": {
      "main": [
        [
          {
            "node": "In-Memory Vector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "7c0de536-e9e5-4aa2-bdfc-595805b0020a",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "41d1e72e4425af7bb5431f5a3935e005f1f2bc790948207b9a931061d160b4be"
  },
  "id": "L1ltInz8XPxFOteI",
  "tags": []
}